<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ¯ Ù…ÙˆØ³ÙˆØ¹Ø© Ø¨ÙŠØ¹ Zoho Ø§Ù„Ø´Ø§Ù…Ù„Ø© - e& Egypt 2025</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --primary:#0066cc;
      --accent:#ff6b35;
      --bg:#f8f9ff;
      --card:#ffffff;
      --success:#10b981;
      --warning:#f59e0b;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Tajawal',sans-serif;background:var(--bg);color:#1e293b;line-height:1.7;padding-bottom:40px}
    
    .container{max-width:1200px;margin:0 auto;padding:15px}
    
    header{
      background:linear-gradient(135deg,var(--primary),var(--accent));
      color:white;
      padding:25px 20px;
      border-radius:15px;
      margin-bottom:25px;
      text-align:center;
      box-shadow:0 8px 25px rgba(0,102,204,0.2)
    }
    h1{font-size:28px;margin:10px 0;font-weight:700}
    .subtitle{font-size:15px;opacity:0.95;margin-top:8px}
    
    .stats{
      display:flex;
      gap:15px;
      margin:20px 0;
      flex-wrap:wrap;
      justify-content:center;
    }
    .stat{
      background:rgba(255,255,255,0.2);
      padding:10px 20px;
      border-radius:8px;
      font-size:14px;
    }
    .stat strong{font-size:20px;display:block}
    
    .search-section{
      background:var(--card);
      padding:25px;
      border-radius:15px;
      margin:20px 0;
      box-shadow:0 4px 20px rgba(0,0,0,0.08)
    }
    
    .controls{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:12px;
      margin-bottom:15px;
    }
    
    select,input,textarea{
      width:100%;
      padding:14px;
      border-radius:10px;
      border:2px solid #e2e8f0;
      font-family:inherit;
      font-size:15px;
      transition:all 0.3s;
    }
    select:focus,input:focus,textarea:focus{
      outline:none;
      border-color:var(--primary);
      box-shadow:0 0 0 3px rgba(0,102,204,0.1)
    }
    
    textarea{
      grid-column:1/-1;
      resize:vertical;
      min-height:80px;
      font-size:16px;
    }
    
    button{
      background:var(--primary);
      color:white;
      border:none;
      padding:14px 24px;
      border-radius:10px;
      font-size:17px;
      cursor:pointer;
      font-weight:600;
      transition:all 0.3s;
      box-shadow:0 4px 12px rgba(0,102,204,0.3)
    }
    button:hover{
      background:#0055aa;
      transform:translateY(-2px);
      box-shadow:0 6px 16px rgba(0,102,204,0.4)
    }
    button:active{transform:translateY(0)}
    
    #ask{
      width:100%;
      margin-top:15px;
      padding:16px;
      font-size:18px;
      font-weight:700;
      background:linear-gradient(135deg,var(--primary),#0055aa);
    }
    
    .examples{
      margin:20px 0;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .examples button{
      background:#e0e7ff;
      color:#3730a3;
      padding:10px 18px;
      font-size:14px;
      box-shadow:none;
      font-weight:500;
    }
    .examples button:hover{
      background:#c7d2fe;
      transform:translateY(-1px);
    }
    
    .results-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin:20px 0 15px;
      padding:15px;
      background:var(--card);
      border-radius:10px;
      box-shadow:0 2px 10px rgba(0,0,0,0.05)
    }
    .results-count{font-size:18px;font-weight:600;color:var(--primary)}
    .clear-btn{
      background:var(--warning);
      padding:8px 16px;
      font-size:14px;
    }
    
    .card{
      background:var(--card);
      padding:22px;
      margin:15px 0;
      border-radius:15px;
      box-shadow:0 4px 18px rgba(0,0,0,0.06);
      border-right:6px solid var(--primary);
      transition:all 0.3s;
      position:relative;
    }
    .card:hover{
      box-shadow:0 8px 25px rgba(0,0,0,0.12);
      transform:translateX(-3px);
    }
    
    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:start;
      margin-bottom:15px;
    }
    .card h3{
      color:var(--primary);
      margin-bottom:0;
      font-size:20px;
      font-weight:700;
      flex:1;
    }
    .card-id{
      background:#f1f5f9;
      color:#64748b;
      padding:4px 10px;
      border-radius:6px;
      font-size:12px;
      font-weight:500;
    }
    
    .short{
      line-height:1.8;
      font-size:16px;
      margin:15px 0;
      color:#334155;
      font-weight:500;
    }
    
    .long{
      display:none;
      background:linear-gradient(135deg,#f0f7ff,#e0f2fe);
      padding:20px;
      border-radius:12px;
      margin-top:15px;
      line-height:2;
      white-space:pre-wrap;
      font-size:15px;
      border:2px solid #bae6fd;
    }
    
    .tags{
      font-size:13px;
      color:#64748b;
      margin-top:12px;
      padding-top:12px;
      border-top:2px solid #e2e8f0;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .tag{
      background:#f1f5f9;
      padding:4px 12px;
      border-radius:20px;
      display:inline-block;
    }
    
    .actions{
      display:flex;
      gap:10px;
      margin-top:15px;
      flex-wrap:wrap;
    }
    
    .show-more{
      background:#e0e7ff;
      color:#3730a3;
      padding:10px 20px;
      font-size:15px;
      font-weight:600;
    }
    .show-more:hover{background:#c7d2fe}
    
    .copy-btn{
      background:var(--success);
      color:white;
      padding:10px 20px;
      font-size:14px;
      font-weight:600;
    }
    .copy-btn:hover{background:#059669}
    .copy-btn.copied{background:#6366f1}
    
    .no-results{
      text-align:center;
      padding:60px 20px;
      background:var(--card);
      border-radius:15px;
      box-shadow:0 4px 15px rgba(0,0,0,0.05)
    }
    .no-results h3{color:#64748b;font-size:24px;margin-bottom:15px}
    .no-results p{color:#94a3b8;font-size:16px;line-height:1.8}
    
    .loading{
      text-align:center;
      padding:40px;
      font-size:18px;
      color:var(--primary);
    }
    
    @media(max-width:768px){
      h1{font-size:22px}
      .controls{grid-template-columns:1fr}
      .examples{justify-content:center}
      .card{padding:18px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ¯ Ù…ÙˆØ³ÙˆØ¹Ø© Ø¨ÙŠØ¹ Zoho Ø§Ù„Ø´Ø§Ù…Ù„Ø©</h1>
      <p class="subtitle">Ù„Ù„ÙØ±Ù‚ Ø§Ù„Ø¨ÙŠØ¹ÙŠØ© Ø¹Ø¨Ø± Ø§Ù„Ù‡Ø§ØªÙ â€“ e& Egypt â€“ Ù†Ø³Ø®Ø© 2025 Ø§Ù„Ù…Ø­Ø¯Ù‘Ø«Ø©</p>
      <div class="stats">
        <div class="stat"><strong>650+</strong> Ø¥Ø¬Ø§Ø¨Ø© Ø¬Ø§Ù‡Ø²Ø©</div>
        <div class="stat"><strong>20</strong> Ø³Ø¤Ø§Ù„ Ø§Ø³ØªÙƒØ´Ø§ÙÙŠ</div>
        <div class="stat"><strong>10</strong> ØµÙ†Ø§Ø¹Ø§Øª Ø±Ø¦ÙŠØ³ÙŠØ©</div>
        <div class="stat"><strong>15</strong> ØªØ·Ø¨ÙŠÙ‚ Zoho</div>
      </div>
    </header>
    
    <div class="search-section">
      <div class="controls">
        <select id="sector">
          <option value="">ğŸ¢ ÙƒÙ„ Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</option>
          <option>ØµØ­Ø©</option>
          <option>Ø¹Ù‚Ø§Ø±Ø§Øª</option>
          <option>Ù…Ø·Ø§Ø¹Ù…</option>
          <option>Ù„ÙˆØ¬Ø³ØªÙŠÙƒ</option>
          <option>ØªØ¬Ø§Ø±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</option>
          <option>Ø®Ø¯Ù…Ø§Øª Ù…Ø­Ø§Ø³Ø¨Ø©</option>
          <option>Ø³ØªØ§Ø±Øª Ø£Ø¨Ø³</option>
          <option>ØªØ¹Ù„ÙŠÙ…</option>
          <option>ØµÙŠØ§Ù†Ø©</option>
          <option>ØªØ³ÙˆÙŠÙ‚</option>
          <option>ØªØ¬Ø²Ø¦Ø©</option>
          <option>Ø®Ø¯Ù…Ø§Øª</option>
          <option>Ø¹Ø§Ù…</option>
          <option>Ù…Ø­Ø§Ø³Ø¨Ø©</option>
          <option>ØªØ¬Ø§Ø±Ø©</option>
          <option>Ù…Ø¨ÙŠØ¹Ø§Øª</option>
          <option>Ø¯Ø¹Ù…</option>
          <option>Ù…Ø´Ø§Ø±ÙŠØ¹</option>
          <option>Ù…ÙˆØ§Ø±Ø¯ Ø¨Ø´Ø±ÙŠØ©</option>
          <option>Ø¯Ø¹Ù… Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</option>
          <option>Ø¥Ø¯Ø§Ø±Ø©</option>
          <option>Ø£Ù…Ø§Ù†</option>
        </select>
        
        <select id="type">
          <option value="">ğŸ“‹ ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
          <option>Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø¨ÙŠØ¹ÙŠ</option>
          <option>Ø§Ø¹ØªØ±Ø§Ø¶ Ø³Ø¹Ø±</option>
          <option>ØªØ·Ø¨ÙŠÙ‚Ø§Øª</option>
          <option>Ø£Ø³Ø¦Ù„Ø©</option>
          <option>ÙÙˆØ§ØªÙŠØ±</option>
          <option>ÙƒØ±ÙˆØ³ Ø³ÙŠÙ„</option>
          <option>Ø­Ù„ÙˆÙ„ ÙƒÙˆÙ…Ø¨Ùˆ</option>
          <option>Ø§ÙƒØªØ´Ø§Ù</option>
          <option>Ù…ØªØ§Ø¨Ø¹Ø©</option>
          <option>Ø¥ØºÙ„Ø§Ù‚</option>
          <option>Ø§Ø¹ØªØ±Ø§Ø¶</option>
          <option>ÙÙˆØ§Ø¦Ø¯</option>
          <option>ROI</option>
          <option>ØªÙƒØ§Ù…Ù„Ø§Øª</option>
          <option>ØªØ¯Ø±ÙŠØ¨</option>
          <option>Ø¯Ø¹Ù…</option>
        </select>
      </div>
      
      <textarea id="question" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ù„ÙŠ Ù‚Ø§Ù„Ù‡ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„Ø¸Ø¨Ø·... Ù…Ø«Ø§Ù„: Ø¹ÙŠØ§Ø¯Ø© Ø£Ø³Ù†Ø§Ù†ØŒ Ø¶ÙŠØ§Ø¹ Ù…ÙˆØ§Ø¹ÙŠØ¯ØŒ Ù„ÙŠØ¯Ø² Ø¹Ù‚Ø§Ø±Ø§ØªØŒ ÙÙˆØ§ØªÙŠØ± Ù…Ø·Ø¹Ù…..." rows="3"></textarea>
      
      <button id="ask">ğŸ” Ø§Ø¨Ø­Ø« ÙˆØ§Ø¹Ø±Ø¶ Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨</button>
      
      <div class="examples">
        <button data-q="Ø¹ÙŠØ§Ø¯Ø© Ø£Ø³Ù†Ø§Ù† Ù…ÙˆØ§Ø¹ÙŠØ¯">ğŸ¥ Ø¹ÙŠØ§Ø¯Ø© / Ù…ÙˆØ§Ø¹ÙŠØ¯</button>
        <button data-q="Ø´Ø±ÙƒØ© Ø¹Ù‚Ø§Ø±Ø§Øª Ù„ÙŠØ¯Ø²">ğŸ¢ Ø¹Ù‚Ø§Ø±Ø§Øª / Ù„ÙŠØ¯Ø²</button>
        <button data-q="Ù…Ø·Ø¹Ù… Ù…Ø®Ø²ÙˆÙ†">ğŸ” Ù…Ø·Ø¹Ù… / Ù…Ø®Ø²ÙˆÙ†</button>
        <button data-q="Ø´Ø±ÙƒØ© Ø´Ø­Ù†">ğŸ“¦ Ø´Ø­Ù† / ØªØªØ¨Ø¹</button>
        <button data-q="ØªØ¬Ø§Ø±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙÙˆØ§ØªÙŠØ±">ğŸ›’ ØªØ¬Ø§Ø±Ø© / Ø¯ÙØ¹</button>
        <button data-q="Ø§Ù„Ø³Ø¹Ø± ØºØ§Ù„ÙŠ">ğŸ’° Ø§Ù„Ø³Ø¹Ø± ØºØ§Ù„ÙŠ</button>
        <button data-q="Zoho CRM Ø¨ÙŠØ¹Ù…Ù„ Ø¥ÙŠÙ‡">ğŸ“Š Ø¥ÙŠÙ‡ CRMØŸ</button>
        <button data-q="Zoho One">ğŸ Zoho One</button>
      </div>
    </div>
    
    <div id="results-container"></div>
    <div id="results"></div>
  </div>

<script type="module">
// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
let kb = [];

async function loadKnowledgeBase() {
  try {
    const response = await fetch('kb-enhanced.json');
    const data = await response.json();
    kb = data.entries || [];
    console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${kb.length} Ø¥Ø¯Ø®Ø§Ù„ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©`);
  } catch (error) {
    console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
    // Fallback to existing kb.json if enhanced not available
    try {
      const response = await fetch('kb.json');
      const data = await response.json();
      kb = data.entries || [];
    } catch (e) {
      console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:', e);
    }
  }
}

// ØªØ·Ø¨ÙŠØ¹ Ø§Ù„Ù†ØµÙˆØµ Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø£ÙØ¶Ù„
function normalize(text) {
  if (!text) return '';
  return text.toLowerCase()
    .replace(/Ø£|Ø¥|Ø¢/g, 'Ø§')
    .replace(/Ø©/g, 'Ù‡')
    .replace(/Ù‰/g, 'ÙŠ')
    .replace(/\s+/g, ' ')
    .trim();
}

// Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
function search() {
  const q = normalize(document.getElementById('question').value);
  const sector = document.getElementById('sector').value;
  const type = document.getElementById('type').value;
  
  if (!q) {
    document.getElementById('results').innerHTML = '<div class="no-results"><h3>âš ï¸ Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø³Ø¤Ø§Ù„Ùƒ Ø£Ùˆ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</h3></div>';
    return;
  }
  
  // Show loading
  document.getElementById('results').innerHTML = '<div class="loading">ğŸ” Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ù…Ø¹Ø±ÙØ©...</div>';
  
  const qWords = q.split(' ').filter(w => w.length > 1);
  
  let results = kb
    .map(e => {
      let score = 0;
      const titleN = normalize(e.title);
      const shortN = normalize(e.answer_short);
      const longN = normalize(e.answer_long);
      const tagsN = e.tags ? e.tags.map(t => normalize(t)).join(' ') : '';
      const sectorN = normalize(e.sector);
      
      // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
      qWords.forEach(word => {
        if (titleN.includes(word)) score += 15;
        if (shortN.includes(word)) score += 10;
        if (longN.includes(word)) score += 5;
        if (tagsN.includes(word)) score += 12;
        if (sectorN.includes(word)) score += 8;
      });
      
      // Ù…ÙƒØ§ÙØ£Ø© Ù„Ù„ØªØ·Ø§Ø¨Ù‚ Ø§Ù„ÙƒØ§Ù…Ù„
      if (titleN.includes(q)) score += 25;
      if (tagsN.includes(q)) score += 20;
      if (shortN.includes(q)) score += 15;
      
      // ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø·Ø§Ø¹ ÙˆØ§Ù„Ù†ÙˆØ¹
      if (sector && e.sector !== sector) score = Math.max(0, score - 10);
      if (type && e.type !== type) score = Math.max(0, score - 10);
      
      return {...e, score};
    })
    .filter(e => e.score > 3)
    .sort((a,b) => b.score - a.score)
    .slice(0, 15); // Ø£ÙØ¶Ù„ 15 Ù†ØªÙŠØ¬Ø©
  
  const container = document.getElementById('results');
  
  if (results.length === 0) {
    container.innerHTML = `
      <div class="no-results">
        <h3>âš ï¸ Ù…Ø§ Ù„Ù‚ÙŠØªØ´ Ù†ØªÙŠØ¬Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© 100%</h3>
        <p>Ø¬Ø±Ø¨ ÙƒÙ„Ù…Ø§Øª Ù…Ø®ØªÙ„ÙØ© Ø£Ùˆ ÙÙ„ØªØ± Ø§Ù„Ù‚Ø·Ø§Ø¹/Ø§Ù„Ù†ÙˆØ¹</p>
        <p style="margin-top:15px;color:#475569">ğŸ’¡ Ø£Ù…Ø«Ù„Ø©: "Ø¹ÙŠØ§Ø¯Ø© Ù…ÙˆØ§Ø¹ÙŠØ¯"ØŒ "Ø¹Ù‚Ø§Ø±Ø§Øª Ù„ÙŠØ¯Ø²"ØŒ "Ù…Ø·Ø¹Ù… Ù…Ø®Ø²ÙˆÙ†"</p>
      </div>
    `;
    return;
  }
  
  // Ø¹Ø±Ø¶ Ø¹Ø¯Ø¯ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
  const resultsHeader = document.getElementById('results-container');
  resultsHeader.innerHTML = `
    <div class="results-header">
      <div class="results-count">âœ… ÙˆØ¬Ø¯Ù†Ø§ ${results.length} Ø­Ù„ Ù…Ù†Ø§Ø³Ø¨</div>
      <button class="clear-btn" onclick="location.reload()">ğŸ”„ Ø¨Ø­Ø« Ø¬Ø¯ÙŠØ¯</button>
    </div>
  `;
  
  container.innerHTML = results.map((r, idx) => `
    <div class="card" data-score="${r.score}">
      <div class="card-header">
        <h3>${r.title}</h3>
        <span class="card-id">#${r.id || idx+1}</span>
      </div>
      
      <div class="short">${r.answer_short}</div>
      
      <div class="actions">
        <button class="show-more" onclick="toggleLong(this)">
          ğŸ“– Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©
        </button>
        <button class="copy-btn" onclick="copyAnswer(this, \`${escapeQuotes(r.answer_short)}\\n\\n${escapeQuotes(r.answer_long)}\`)">
          ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ÙƒÙ„
        </button>
      </div>
      
      <div class="long">${r.answer_long}</div>
      
      <div class="tags">
        <span class="tag">ğŸ“Œ ${r.type || 'Ø¹Ø§Ù…'}</span>
        <span class="tag">ğŸ¢ ${r.sector || 'Ø¹Ø§Ù…'}</span>
        ${(r.tags || []).slice(0, 5).map(t => `<span class="tag">#${t}</span>`).join('')}
      </div>
    </div>
  `).join('');
}

function escapeQuotes(text) {
  return text ? text.replace(/`/g, '\\`').replace(/\$/g, '\\$') : '';
}

window.toggleLong = function(btn) {
  const long = btn.parentElement.nextElementSibling;
  if (long.style.display === 'block') {
    long.style.display = 'none';
    btn.textContent = 'ğŸ“– Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©';
  } else {
    long.style.display = 'block';
    btn.textContent = 'ğŸ“• Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©';
    btn.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
  }
};

window.copyAnswer = function(btn, text) {
  navigator.clipboard.writeText(text).then(() => {
    const original = btn.textContent;
    btn.textContent = 'âœ… ØªÙ… Ø§Ù„Ù†Ø³Ø®!';
    btn.classList.add('copied');
    setTimeout(() => {
      btn.textContent = original;
      btn.classList.remove('copied');
    }, 2000);
  });
};

// Event listeners
document.getElementById('ask').onclick = search;
document.getElementById('question').onkeydown = e => {
  if(e.key==='Enter' && !e.shiftKey) {
    e.preventDefault();
    search();
  }
};

document.querySelectorAll('.examples button').forEach(b => {
  b.onclick = () => {
    document.getElementById('question').value = b.dataset.q;
    search();
  };
});

// Initialize
loadKnowledgeBase();
</script>
</body>
</html>
